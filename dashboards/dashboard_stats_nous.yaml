type: vertical-stack
cards:
  # TITRE & INFOS GLOBALES (Reste identique)
  - type: custom:mushroom-template-card
    primary: "Bilan du Cycle : {{ states('sensor.nous_a11z_stats_cycle') }}"
    secondary: >-
      {% set t = state_attr('sensor.nous_a11z_stats_cycle', 'duration') %}
      {% set h = (t / 3600) | int %}
      {% set m = ((t % 3600) / 60) | int %}
      ⏱️ {{ h }}h {{ m }}m  |  ⚡ {{ state_attr('sensor.nous_a11z_stats_cycle', 'energy_consumed') }} kWh
    icon: mdi:chart-timeline-variant
    icon_color: teal
    layout: horizontal
    card_mod:
      style: |
        ha-card {
          background: rgba(40, 40, 40, 0.5) !important;
          border: none !important;
        }

  # 1. PUISSANCE (W) - Tout sur une ligne
  - type: custom:mushroom-template-card
    primary: "Puissance"
    secondary: >-
      Min: {{ state_attr('sensor.nous_a11z_stats_cycle', 'min_power') }} W  |  
      Moy: {{ state_attr('sensor.nous_a11z_stats_cycle', 'avg_power') }} W  |  
      Max: {{ state_attr('sensor.nous_a11z_stats_cycle', 'max_power') }} W
    icon: mdi:lightning-bolt
    icon_color: orange
    layout: horizontal
    multiline_secondary: true
    card_mod:
      style: |
        ha-card {
          background: none !important;
          border: none !important;
          box-shadow: none !important;
        }

  # 2. TENSION (V) - Tout sur une ligne
  - type: custom:mushroom-template-card
    primary: "Tension"
    secondary: >-
      Min: {{ state_attr('sensor.nous_a11z_stats_cycle', 'min_voltage') }} V  |  
      Moy: {{ state_attr('sensor.nous_a11z_stats_cycle', 'avg_voltage') }} V  |  
      Max: {{ state_attr('sensor.nous_a11z_stats_cycle', 'max_voltage') }} V
    icon: mdi:sine-wave
    icon_color: blue
    layout: horizontal
    multiline_secondary: true
    card_mod:
      style: |
        ha-card {
          background: none !important;
          border: none !important;
          box-shadow: none !important;
        }

  # 3. COURANT (A) - Tout sur une ligne
  - type: custom:mushroom-template-card
    primary: "Courant"
    secondary: >-
      Min: {{ state_attr('sensor.nous_a11z_stats_cycle', 'min_current') }} A  |  
      Moy: {{ state_attr('sensor.nous_a11z_stats_cycle', 'avg_current') }} A  |  
      Max: {{ state_attr('sensor.nous_a11z_stats_cycle', 'max_current') }} A
    icon: mdi:current-ac
    icon_color: green
    layout: horizontal
    multiline_secondary: true
    card_mod:
      style: |
        ha-card {
          background: none !important;
          border: none !important;
          box-shadow: none !important;
        }
